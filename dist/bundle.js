(()=>{"use strict";const e=function(e){var t=document.createElement("div"),n=e.querySelectorAll("input"),o=function(){t.remove()},a=function(e){t.className="",t.style.cssText="font-size: 2rem;color: white;",t.textContent="Something went wrong",console.error(e),setTimeout(o,5e3)};e.addEventListener("submit",(function(r){r.preventDefault(),e.append(t),t.className="statusMessage";var l=new FormData(e),i={};l.forEach((function(e,t){i[t]=e})),c(i).then((function(e){if(200!==e.status)throw new Error("network status is not 200");t.className="",t.style.cssText="font-size: 2rem;color: white;",t.textContent="Thank you! We will contact you soon!",n.forEach((function(e){e.value=""})),setTimeout(o,5e3)})).catch(a)}));var c=function(e){return fetch("./server.php",{method:"POST",header:{"Content-Type":"application/json"},body:JSON.stringify(e)})}};var t,n,o,a,c,r,l,i,s,u,d,m,v,f,y,p,h,g,w,q,E,L;w=document.querySelector("#timer-hours"),q=document.querySelector("#timer-minutes"),E=document.querySelector("#timer-seconds"),L=setInterval((function(){var e,t,n,o=(e=(new Date("01 june 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),n=Math.floor(e/60%60),{timeRemaining:e,hours:Math.floor(e/60/60),minutes:n,seconds:t}),a=function(e,t){return t.textContent=e<10?"0".concat(e):"".concat(e)};a(o.hours,w),a(o.minutes,q),a(o.seconds,E),o.timeRemaining<=0&&(clearInterval(L),w.textContent="00",q.textContent="00",E.textContent="00")}),1e3),v=document.querySelector("menu"),f=0,y=function e(){v.style.left=0,d=requestAnimationFrame(e),(f+=2)<101?v.style.transform="translate(".concat(f,"%)"):(cancelAnimationFrame(d),f=0)},p=0,h=function e(){m=requestAnimationFrame(e);var t=v.clientWidth;(p+=5)<t?v.style.left="".concat(p,"px"):(cancelAnimationFrame(m),p=0)},g=function(){p=0,f=0,v.style.left=0,v.style.transform&&"translate(-100%)"!==v.style.transform&&"translate(100%)"!==v.style.transform?v.style.transform="translate(-100%)":v.style.transform="translate(0)"},document.body.addEventListener("click",(function(e){var t=e.target;t.closest(".menu")?(console.log("menu click"),window.innerWidth>768?(v.classList.add("shown"),console.log("will show menu"),y()):g()):t.classList.contains("close-btn")||t.closest("menu ul>li>a")?(v.classList.remove("shown"),window.innerWidth>768?h():g()):(t=t.closest("menu"))||e.target.closest(".menu")||!v.classList.contains("shown")||(v.classList.remove("shown"),window.innerWidth>768?h():g())})),function(){var e,t,n=document.querySelector(".popup"),o=0,a=function t(){e=requestAnimationFrame(t),(o+=.01)<1?(n.style.display="block",n.style.opacity="".concat(o)):(cancelAnimationFrame(e),o=0)},c=1,r=function e(){t=requestAnimationFrame(e),(c-=.01)>0?n.style.opacity="".concat(c):(n.style.display="none",cancelAnimationFrame(t),c=1)},l=function(){""===n.style.display||"none"===n.style.display?(n.style.opacity=1,n.style.display="block"):(n.style.opacity=0,n.style.display="none")};document.addEventListener("click",(function(e){var t=e.target;t.matches(".popup-btn")&&(window.innerWidth>768?a():l()),"block"===n.style.display&&(t.classList.contains("popup-close")?window.innerWidth>768?r():l():(t=t.closest(".popup-content"))||e.target.matches(".popup-btn")||(window.innerWidth>768?r():l()))}))}(),s=document.querySelector('a[href="#service-block"]'),u=document.getElementById("service-block"),s.addEventListener("click",(function(e){e.preventDefault();var t=u.getBoundingClientRect().top+window.pageYOffset,n=setInterval((function(){var e=t/20;e>window.pageYOffset-t&&window.innerHeight+window.pageYOffset<document.body.offsetHeight?window.scrollBy(0,e):(window.scrollTo(0,t),clearInterval(n))}),15)})),r=document.querySelector(".service-header"),l=r.querySelectorAll(".service-header-tab"),i=document.querySelectorAll(".service-tab"),r.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&l.forEach((function(e,n){e===t&&function(e){for(var t=0;t<l.length;t++)e===t?(l[t].classList.add("active"),i[t].classList.remove("d-none")):(l[t].classList.remove("active"),i[t].classList.add("d-none"))}(n)}))})),function(){for(var e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-dots"),n=0;n<e.length;n++){var o=document.createElement("li");o.classList.add("dot"),t.append(o)}var a=document.querySelectorAll(".dot"),c=document.querySelector(".portfolio-content");a[0].classList.add("dot-active");var r,l=0,i=function(e,t,n){e[t].classList.remove(n)},s=function(e,t,n){e[t].classList.add(n)},u=function(){i(e,l,"portfolio-item-active"),i(a,l,"dot-active"),++l>=e.length&&(l=0),s(e,l,"portfolio-item-active"),s(a,l,"dot-active")},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;r=setInterval(u,e)};c.addEventListener("click",(function(t){t.preventDefault();var n=t.target;n.matches(".portfolio-btn, .dot")&&(i(e,l,"portfolio-item-active"),i(a,l,"dot-active"),n.matches("#arrow-right")?l++:n.matches("#arrow-left")?l--:n.matches(".dot")&&a.forEach((function(e,t){e===n&&(l=t)})),l>=e.length&&(l=0),l<0&&(l=e.length-1),s(e,l,"portfolio-item-active"),s(a,l,"dot-active"))})),c.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(r)})),c.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&d()})),d(3e3)}(),o=document.querySelectorAll(".command__photo"),a=document.querySelector(".command"),c=[],o.forEach((function(e){var t=e.getAttribute("src");c.push(t)})),a.addEventListener("mouseover",(function(e){o.forEach((function(t){e.target===t&&(e.target.src=e.target.dataset.img)}))})),a.addEventListener("mouseout",(function(e){o.forEach((function(t,n){e.target===t&&(e.target.src=c[n])}))})),t=function(e){e.style.border="1px solid red",setTimeout((function(){e.style.border=""}),3e3)},n=function(e){e.style.border="1px solid green",setTimeout((function(){e.style.border=""}),3e3)},document.querySelector(".calc-block").addEventListener("input",(function(e){var t=e.target;(t.matches(".calc-count")||t.matches(".calc-square")||t.matches(".calc-day"))&&(t.value=t.value.replace(/\D/g,""))})),document.addEventListener("blur",(function(e){var o=e.target;document.querySelectorAll('[type="email"]').forEach((function(e){e===o&&(/[a-z-@_.!~*']+@\w+\.\w{2,3}/g.test(o.value)?n(o):(o.value="",t(o)))}))}),!0),document.addEventListener("blur",(function(e){var o=document.querySelectorAll('[placeholder="Ваше имя"'),a=document.querySelectorAll('[placeholder="Ваше сообщение"'),c=e.target;o.forEach((function(e){e===c&&(/^[А-яё\s-]{2,50}$/i.test(c.value)?n(c):(c.value="",t(c)),c.value=c.value.toLowerCase().replace(/^.|\s./g,(function(e){return e.toUpperCase()})))})),a.forEach((function(e){e===c&&(c.value=c.value.replace(/[^А-яё\s\d-.!?,:;']*/gi,""))}))}),!0),document.addEventListener("blur",(function(e){var o=e.target;document.querySelectorAll('[type="tel"').forEach((function(e){e===o&&(/^[+\d]{11,12}$/g.test(o.value)?n(o):(o.value="",t(o)))}))}),!0),document.addEventListener("blur",(function(e){var t=e.target;t.value=t.value.replace(/-+/g,"-"),t.value=t.value.replace(/\s+/g," "),t.value=t.value.replace(/^\s/g,""),t.value=t.value.replace(/\s$/g,"")}),!0),function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),a=document.querySelector(".calc-count"),c=document.querySelector(".calc-square"),r=document.querySelector(".calc-day"),l=document.getElementById("total"),i=0,s=function(){var n=0,s=1,u=1,d=o.options[o.selectedIndex].value,m=+c.value;a.value>1&&(s+=(a.value-1)/10),r.value&&r.value<5?u*=2:r.value&&r.value<10&&(u*=1.5),d&&m&&(n=t*d*m*s*u),console.log("total: ",n),e=requestAnimationFrame((function t(){e=requestAnimationFrame(t),(i+=100)<=n?l.textContent=i:l.textContent>n?(i=l.textContent,console.log(" numCount in value < total: ",i),i-=100,l.textContent=i):""===d?(i=0,l.textContent=i,cancelAnimationFrame(e),c.value="",a.value="",r.value=""):(cancelAnimationFrame(e),i=n)}))};n.addEventListener("change",(function(e){var t=e.target;(t.matches("select")||t.matches("input"))&&s()}))}(100),e(form1),e(form3),e(form2)})();